(this["webpackJsonpsong-visualizations"]=this["webpackJsonpsong-visualizations"]||[]).push([[1],{227:function(e,t,n){},240:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),i=n(34),a=n.n(i),c=(n(227),n(9)),u=n(282),o=n(280),l=n(22),h=n(23),g=n.p+"static/media/spotify_decades.d5ba62b9.csv",d=function(){function e(t){for(var n in Object(l.a)(this,e),this.name="",this.artist="",this.album_name="",this.album_image_url="",this.album_release_date="",this.duration_ms="",this.explicit="",this.popularity="",this.preview_url="",this.danceability="",this.energy="",this.key="",this.loudness="",this.mode="",this.speechiness="",this.acousticness="",this.instrumentalness="",this.liveness="",this.valence="",this.tempo="",this.time_signature="",this.artist_followers="",this.artist_genres="",this.artist_popularity="",this.track_id="",t){var r;this[n]=null!==(r=t[n])&&void 0!==r?r:""}}return Object(h.a)(e,[{key:"year",value:function(){return Number(this.album_release_date.slice(0,4))}},{key:"decade",value:function(){return this.year()-this.year()%10}},{key:"genres",value:function(){return this.artist_genres.replaceAll(/[[\]'"]/gi,"").split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0}))}}]),e}();var f=n(69),j=n(32),b=["danceability","energy","speechiness","acousticness","instrumentalness","liveness","valence"],v=function(){function e(t){var n=this;Object(l.a)(this,e),this.rows=void 0,this.genres=void 0,this.genreCounts=void 0,this.rows=t;var r=t.flatMap((function(e){return e.genres()}));this.genreCounts=r.reduce((function(e,t){var n;return e.set(t,1+(null!==(n=e.get(t))&&void 0!==n?n:0))}),new Map),this.genres=Object(j.uniq)(r).sort((function(e,t){var r,s,i=null!==(r=n.genreCounts.get(e))&&void 0!==r?r:0,a=null!==(s=n.genreCounts.get(t))&&void 0!==s?s:0;return i===a?e.localeCompare(t):i-a}))}return Object(h.a)(e,[{key:"toUniqueArtistsRollup",value:function(e){var t=e.genreToggles.selectedGenres(),n=this.rows.filter((function(t){return t.year()>=e.yearStart})).filter((function(t){return t.year()<=e.yearEnd})).filter((function(e){return Object(j.isEmpty)(t)||Object(j.intersection)(t,e.genres()).length>0})).filter((function(e){return e.decade()>0})).map((function(e){return{artist:e.artist,year:e.year(),decade:e.decade(),genres:e.genres()}})),r=f.c(n,(function(e){return e.decade}),(function(e){return e.artist}));return Array.from(r).flatMap((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1],s=Array.from(r).map((function(e){var t=Object(c.a)(e,2),r=t[0],s=t[1];return{decade:n,artist:r,count:s.length,distinctArtists:1,genres:s.flatMap((function(e){return e.genres}))}}));return s.push({decade:n,artist:"",count:s.reduce((function(e,t){return e+t.count}),0),distinctArtists:s.length,genres:s.flatMap((function(e){return e.genres}))}),s}))}},{key:"toGenreVisRow",value:function(e){var t=e.genreToggles.selectedGenres();return this.rows.filter((function(t){return t.year()>=e.yearStart})).filter((function(t){return t.year()<=e.yearEnd})).filter((function(e){return Object(j.isEmpty)(t)||Object(j.intersection)(t,e.genres()).length>0})).flatMap((function(e){return b.map((function(t){return{year:e.year(),decade:e.decade(),feature_name:t,value:e[t]?Number(e[t]):0,genres:e.genres()}}))}))}}],[{key:"fromBlob",value:function(t){return new e(f.b(t).map((function(e){return new d(e)})))}}]),e}(),O=n(29),p=n(30),y=n(35),m=n(277),x=n(281),w=n(278),T=n(2),_=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"selected",value:function(e){var t;return null!==(t=this.get(e))&&void 0!==t&&t}},{key:"selectedGenres",value:function(){var e=this;return Array.from(this.keys()).filter((function(t){return e.selected(t)}))}}]),n}(Object(y.a)(Map));function k(e){function t(t){return Object(T.jsx)(m.a,{value:e.genreToggles.get(t),onChange:function(n){var r=new _(e.genreToggles);r.set(t,n.target.checked),e.setGenreToggles(r)}})}return Object(T.jsx)(x.a,{children:e.options.map((function(e){return Object(T.jsx)(w.a,{control:t(e),label:e},e)}))})}var A=n(14),C=n(276);function S(e){var t=Object(r.useState)(""),n=Object(c.a)(t,2),s=n[0],i=n[1],a=e.options.filter((function(e){return e&&e.toLowerCase().includes(s)})).slice(0,10),u=Object(j.uniq)([].concat(Object(A.a)(a),Object(A.a)(e.selected)));return Object(T.jsxs)(o.a,{container:!0,children:[Object(T.jsx)(o.a,{item:!0,xs:12,children:Object(T.jsx)(C.a,{label:"search genres",variant:"standard",onChange:function(e){return i(e.target.value)}})}),Object(T.jsxs)(o.a,{item:!0,xs:12,children:[Object(T.jsx)("h4",{children:"Top matches"}),Object(T.jsx)(k,{genreToggles:e.genreToggles,setGenreToggles:e.setGenreToggles,options:u})]})]})}var G=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,402))})),M=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,399))})),E=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,400))})),z=Object(T.jsx)("p",{children:"Loading..."});var B=function(){var e=function(){var e=Object(r.useState)(sessionStorage.getItem("dataBytes")),t=Object(c.a)(e,2),n=t[0],s=t[1];return Object(r.useEffect)((function(){var e;(null!==(e=null===n||void 0===n?void 0:n.length)&&void 0!==e?e:0)>0||fetch(g).then((function(e){return e.text()})).then((function(e){e&&(s(e),sessionStorage.setItem("dataBytes",e))}))})),n}(),t=Object(r.useState)(new _),n=Object(c.a)(t,2),s=n[0],i=n[1];if(!e)return z;var a=v.fromBlob(e),l=a.genres.reverse(),h=Array.from(s.keys()).filter((function(e){return s.get(e)}));return Object(T.jsx)(r.Suspense,{fallback:z,children:Object(T.jsx)(u.a,{children:Object(T.jsxs)(o.a,{container:!0,children:[Object(T.jsx)(o.a,{item:!0,xs:12,children:Object(T.jsx)("h1",{style:{textAlign:"center"},children:"Audio Features"})}),Object(T.jsx)(o.a,{item:!0,xs:2,children:Object(T.jsx)(S,{genreToggles:s,setGenreToggles:i,options:l,selected:h})}),Object(T.jsxs)(o.a,{item:!0,xs:10,children:[Object(T.jsx)("h2",{children:"Variation in Features"}),Object(T.jsx)(G,{dataset:a,genreToggles:s,height:300,width:800}),Object(T.jsx)("h2",{children:"Count of Top Artists"}),Object(T.jsx)(M,{dataset:a,genreToggles:s,height:300,width:800,margin:{left:50,top:50,right:20,bottom:20}}),Object(T.jsx)("h2",{children:"Top Artists by Decade"}),Object(T.jsx)(E,{dataset:a,genreToggles:s,topN:10,height:300,width:800})]})]})})})};a.a.render(Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(B,{})}),document.getElementById("root"))}},[[240,2,3]]]);
//# sourceMappingURL=main.d75cd8e3.chunk.js.map