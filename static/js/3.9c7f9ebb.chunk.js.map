{"version":3,"sources":["FeatureByGenreSpec.ts","FeaturesByGenreVis.tsx"],"names":["FeaturesByGenreSpec","props","decades","uniq","data","map","r","decade","sort","$schema","mark","type","width","height","values","encoding","x","field","title","axis","format","scale","domain","yearStart","yearEnd","y","aggregate","stack","color","FeaturesByGenreVis","show","Box","filter","DataFilter","VegaLite","spec","dataset","toGenreVisRow"],"mappings":"2OAIO,SAASA,EAAoBC,GAOlC,IAAMC,EAAUC,eAAKF,EAAMG,KAAKC,KAAI,SAACC,GAAD,OAAOA,EAAEC,WAASC,OAEtD,MAAO,CACLC,QAAS,kDACTC,KAAM,CAAEC,KAAM,QACdC,MAAOX,EAAMW,MACbC,OAAQZ,EAAMY,OACdT,KAAM,CACJU,OAAQb,EAAMG,MAEhBW,SAAU,CACRC,EAAG,CACDC,MAAO,OACPN,KAAM,eACNO,MAAO,OACPC,KAAM,CAAEC,OAAQ,IAAKN,OAAQX,eAAKD,IAClCmB,MAAO,CAAEC,OAAQ,CAACrB,EAAMsB,UAAWtB,EAAMuB,WAE3CC,EAAG,CACDC,UAAW,MACXT,MAAO,QACPC,MAAO,oBACPS,MAAO,aAETC,MAAO,CAAEX,MAAO,eAAgBN,KAAM,UAAWO,MAAO,mB,WCtBvD,SAASW,EAAmB5B,GACjC,IAAKA,EAAM6B,KAAM,OAAO,cAACC,EAAA,EAAD,IACxB,IAAMC,EAAS,IAAIC,IAAWhC,GAC9B,OACE,cAAC8B,EAAA,EAAD,UACE,cAACG,EAAA,EAAD,CACEC,KAAMnC,EAAoB,uCACrBC,GACA+B,GAFoB,IAGvB5B,KAAMH,EAAMmC,QAAQC,cAAcL,UAO7BH","file":"static/js/3.9c7f9ebb.chunk.js","sourcesContent":["import { VisualizationSpec } from \"react-vega\";\nimport { GenreVisRow } from \"./Dataset\";\nimport { uniq } from \"lodash/fp\";\n\nexport function FeaturesByGenreSpec(props: {\n  data: GenreVisRow[];\n  height: number;\n  width: number;\n  yearStart: number;\n  yearEnd: number;\n}): VisualizationSpec {\n  const decades = uniq(props.data.map((r) => r.decade)).sort();\n\n  return {\n    $schema: \"https://vega.github.io/schema/vega-lite/v5.json\",\n    mark: { type: \"area\" },\n    width: props.width,\n    height: props.height,\n    data: {\n      values: props.data,\n    },\n    encoding: {\n      x: {\n        field: \"year\",\n        type: \"quantitative\",\n        title: \"Year\",\n        axis: { format: \"d\", values: uniq(decades) },\n        scale: { domain: [props.yearStart, props.yearEnd] },\n      },\n      y: {\n        aggregate: \"sum\",\n        field: \"value\",\n        title: \"Feature Dominance\",\n        stack: \"normalize\",\n      },\n      color: { field: \"feature_name\", type: \"nominal\", title: \"Audio Feature\" },\n    },\n  };\n}\n","import { Box } from \"@mui/material\";\nimport { VegaLite } from \"react-vega\";\nimport { DataFilter, DataFilterProps } from \"./DataFilter\";\nimport { Dataset } from \"./Dataset\";\nimport { FeaturesByGenreSpec } from \"./FeatureByGenreSpec\";\n\nexport interface FeaturesByGenreVisProps extends DataFilterProps {\n  height: number;\n  width: number;\n  dataset: Dataset;\n  show: boolean;\n}\n\nexport function FeaturesByGenreVis(props: FeaturesByGenreVisProps) {\n  if (!props.show) return <Box />;\n  const filter = new DataFilter(props);\n  return (\n    <Box>\n      <VegaLite\n        spec={FeaturesByGenreSpec({\n          ...props,\n          ...filter,\n          data: props.dataset.toGenreVisRow(filter),\n        })}\n      />\n    </Box>\n  );\n}\n\nexport default FeaturesByGenreVis;\n"],"sourceRoot":""}