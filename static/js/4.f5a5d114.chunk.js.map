{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","DataFilter.ts","../node_modules/@mui/system/esm/createBox.js","../node_modules/@mui/material/Box/Box.js","TopArtistsPerDecadeBarsVis.tsx"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","DataFilter","props","genreToggles","yearStart","yearEnd","this","_excluded","Box","options","defaultTheme","defaultClassName","generateClassName","BoxRoot","styled","styleFunctionSx","React","inProps","ref","theme","useTheme","_extendSxProp","extendSxProp","className","component","other","_objectWithoutPropertiesLoose","_jsx","_extends","as","clsx","createBox","createTheme","ClassNameGenerator","generate","BarChart","visRef","useRef","useEffect","svg","iWidth","width","margin","left","right","iHeight","height","top","bottom","data","rollupData","xAttr","yAttr","x","d3","domain","Array","from","map","n","toString","padding","y","line","d","bandwidth","distinctArtists","current","append","attr","g","selectAll","join","datum","text","style","call","drawBarChart","remove","TopArtistsPerDecadeBarsVis","rollup","dataset","toUniqueArtistsRollup","r","sort","a","b","decade"],"mappings":"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","file":"static/js/4.f5a5d114.chunk.js","sourcesContent":["import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { GenreToggleMap } from \"./GenreToggles\";\n\nexport interface DataFilterProps {\n  genreToggles: GenreToggleMap;\n  yearStart?: number;\n  yearEnd?: number;\n}\n\nexport class DataFilter {\n  genreToggles: GenreToggleMap;\n  yearStart: number;\n  yearEnd: number;\n  constructor(props: DataFilterProps) {\n    this.yearStart = props.yearStart ?? 1950;\n    this.yearStart = this.yearStart > 1950 ? this.yearStart : 1950;\n    this.yearEnd = props.yearStart ?? 2025;\n    this.yearEnd = this.yearEnd < 2025 ? this.yearEnd : 2025;\n    this.genreToggles = props.genreToggles;\n  }\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"component\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport styled from '@mui/styled-engine';\nimport styleFunctionSx, { extendSxProp } from './styleFunctionSx';\nimport useTheme from './useTheme';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function createBox(options = {}) {\n  const {\n    defaultTheme,\n    defaultClassName = 'MuiBox-root',\n    generateClassName\n  } = options;\n  const BoxRoot = styled('div')(styleFunctionSx);\n  const Box = /*#__PURE__*/React.forwardRef(function Box(inProps, ref) {\n    const theme = useTheme(defaultTheme);\n\n    const _extendSxProp = extendSxProp(inProps),\n          {\n      className,\n      component = 'div'\n    } = _extendSxProp,\n          other = _objectWithoutPropertiesLoose(_extendSxProp, _excluded);\n\n    return /*#__PURE__*/_jsx(BoxRoot, _extends({\n      as: component,\n      ref: ref,\n      className: clsx(className, generateClassName ? generateClassName(defaultClassName) : defaultClassName),\n      theme: theme\n    }, other));\n  });\n  process.env.NODE_ENV !== \"production\" ? Box.propTypes\n  /* remove-proptypes */\n  = {\n    // ----------------------------- Warning --------------------------------\n    // | These PropTypes are generated from the TypeScript type definitions |\n    // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n    // ----------------------------------------------------------------------\n\n    /**\n     * @ignore\n     */\n    children: PropTypes.node,\n\n    /**\n     * The component used for the root node.\n     * Either a string to use a HTML element or a component.\n     */\n    component: PropTypes.elementType,\n\n    /**\n     * @ignore\n     */\n    sx: PropTypes.oneOfType([PropTypes.object, PropTypes.array])\n  } : void 0;\n  return Box;\n}","import { createBox } from '@mui/system';\nimport { unstable_ClassNameGenerator as ClassNameGenerator } from '../utils';\nimport { createTheme } from '../styles';\nconst defaultTheme = createTheme();\n/**\n * @ignore - do not document.\n */\n\nconst Box = createBox({\n  defaultTheme,\n  defaultClassName: 'MuiBox-root',\n  generateClassName: ClassNameGenerator.generate\n});\nexport default Box;","import { Box } from \"@mui/material\";\nimport * as d3 from \"d3\";\nimport React, { RefObject, useEffect, useRef } from \"react\";\nimport { DataFilter } from \"./DataFilter\";\nimport { Dataset, UniqueArtistsRollup } from \"./Dataset\";\nimport { GenreToggleMap } from \"./GenreToggles\";\n\nfunction TopArtistsPerDecadeBarsVis(props: {\n  dataset: Dataset;\n  genreToggles: GenreToggleMap;\n  yearStart?: number;\n  yearEnd?: number;\n  height: number;\n  width: number;\n  margin: { left: number; right: number; top: number; bottom: number };\n}) {\n  const rollup = props.dataset\n    .toUniqueArtistsRollup({ ...props, ...new DataFilter(props) })\n    .filter((r) => r.distinctArtists > 1);\n\n  rollup.sort((a, b) => a.decade - b.decade);\n\n  return (\n    <Box>\n      <BarChart\n        rollupData={rollup}\n        height={props.height}\n        width={props.width}\n        margin={props.margin}\n      />\n    </Box>\n  );\n}\n\nfunction BarChart(props: {\n  rollupData: UniqueArtistsRollup[];\n  height: number;\n  width: number;\n  margin: { left: number; right: number; top: number; bottom: number };\n}) {\n  const visRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    const svg = drawBarChart({ ref: visRef, ...props });\n    return () => {\n      svg.remove();\n    };\n  });\n  return <div ref={visRef} />;\n}\n\nfunction drawBarChart(props: {\n  rollupData: UniqueArtistsRollup[];\n  ref: RefObject<HTMLDivElement>;\n  height: number;\n  width: number;\n  margin: { left: number; right: number; top: number; bottom: number };\n}) {\n  const iWidth = props.width - props.margin.left - props.margin.right;\n  const iHeight = props.height - props.margin.top - props.margin.bottom;\n\n  const data = props.rollupData;\n\n  const xAttr = \"decade\";\n  const yAttr = \"distinctArtists\";\n\n  const x = d3\n    .scaleBand([0, iWidth])\n    .domain(\n      Array.from(new Array(8).keys())\n        .map((n) => 1950 + n * 10)\n        .map((x) => x.toString())\n    )\n    .padding(0.05);\n\n  const y = d3.scaleLinear([iHeight, 0]).domain([0, 210]);\n\n  const line = d3\n    .line<UniqueArtistsRollup>()\n    .x((d) => (x(d[xAttr].toString()) ?? 0) + x.bandwidth() / 2)\n    .y((d) => y(d.distinctArtists));\n\n  const div = d3.select(props.ref.current);\n  const svg = div\n    .append(\"svg\")\n    .attr(\"viewBox\", `0 0 ${props.width} ${props.height}`);\n\n  const g = svg\n    .append(\"g\")\n    .attr(\"transform\", `translate(${props.margin.left}, ${props.margin.top})`);\n\n  g.selectAll(\"rect\")\n    .data(data)\n    .join(\"rect\")\n    .attr(\"x\", (d) => x(d[xAttr].toString()) ?? 0)\n    .attr(\"width\", () => x.bandwidth())\n    .attr(\"y\", (d) => y(d[yAttr]))\n    .attr(\"height\", (d) => iHeight - y(d[yAttr]))\n    .attr(\"fill\", \"#adc2eb\");\n\n  g.selectAll(\".point\")\n    .data(data)\n    .join(\"circle\")\n    .attr(\"class\", \"point\")\n    .attr(\"cx\", (d) => (x(d[xAttr].toString()) ?? 0) + x.bandwidth() / 2)\n    .attr(\"cy\", (d) => y(d[yAttr]))\n    .attr(\"r\", 2)\n    .attr(\"fill\", \"black\");\n\n  g.append(\"path\")\n    .datum(data)\n    .attr(\"d\", (d) => line(d))\n    .attr(\"fill\", \"none\")\n    .attr(\"class\", \"line\")\n    .attr(\"stroke\", \"steelblue\")\n    .attr(\"stroke-width\", 1.5);\n\n  g.selectAll(\".countText\")\n    .data(data)\n    .join(\"text\")\n    .text((d) => d.distinctArtists)\n    .attr(\"class\", \"countText\")\n    .attr(\"text-anchor\", \"middle\")\n    .attr(\"x\", (d) => (x(d[xAttr].toString()) ?? 0) + x.bandwidth() / 2)\n    .attr(\"y\", (d) => y(d[yAttr]) - 15);\n\n  g.append(\"g\")\n    .attr(\"transform\", `translate(0, ${iHeight})`)\n    .style(\"font-size\", \"small\")\n    .call(d3.axisBottom(x));\n\n  return svg;\n}\n\nexport default TopArtistsPerDecadeBarsVis;\n"],"sourceRoot":""}