(this["webpackJsonpsong-visualizations"]=this["webpackJsonpsong-visualizations"]||[]).push([[0],{228:function(e,t,n){},241:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),i=n(31),a=n.n(i),c=(n(228),n(10)),o=n(283),u=n(281),l=n(53),h=n(93),g=n(14),b=n(277),j=n(55),d=n(278),f=n(282),v=n(279),m=n(2);function O(e){function t(t){return Object(m.jsx)(d.a,{value:e.genreToggles.get(t),onChange:function(n){var s=new Map(e.genreToggles);s.set(t,n.target.checked),e.setGenreToggles(s)}})}return Object(m.jsx)(f.a,{children:e.options.map((function(e){return Object(m.jsx)(v.a,{control:t(e),label:e},e)}))})}function p(e){var t=Object(s.useState)(""),n=Object(c.a)(t,2),r=n[0],i=n[1],a=e.options.filter((function(e){return e&&e.toLowerCase().includes(r)})).slice(0,10),o=Object(j.uniq)([].concat(Object(g.a)(a),Object(g.a)(e.selected)));return Object(m.jsxs)(u.a,{container:!0,children:[Object(m.jsx)(u.a,{item:!0,xs:12,children:Object(m.jsx)(b.a,{label:"search genres",variant:"standard",onChange:function(e){return i(e.target.value)}})}),Object(m.jsxs)(u.a,{item:!0,xs:12,children:[Object(m.jsx)("h4",{children:"Top matches"}),Object(m.jsx)(O,{genreToggles:e.genreToggles,setGenreToggles:e.setGenreToggles,options:o})]})]})}var x=Object(s.lazy)((function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,401))})),y=Object(s.lazy)((function(){return n.e(4).then(n.bind(null,399))})),_=Object(m.jsx)("p",{children:"Loading..."});var w=function(){var e=Object(l.b)(),t=Object(s.useState)(new Map),n=Object(c.a)(t,2),r=n[0],i=n[1];if(!e)return _;var a=h.a.fromBlob(e),g=a.genres.reverse(),b=Array.from(r.keys()).filter((function(e){return r.get(e)}));return Object(m.jsx)(s.Suspense,{fallback:_,children:Object(m.jsx)(o.a,{children:Object(m.jsxs)(u.a,{container:!0,children:[Object(m.jsx)(u.a,{item:!0,xs:12,children:Object(m.jsx)("h1",{style:{textAlign:"center"},children:"Audio Features"})}),Object(m.jsx)(u.a,{item:!0,xs:2,children:Object(m.jsx)(p,{genreToggles:r,setGenreToggles:i,options:g,selected:b})}),Object(m.jsxs)(u.a,{item:!0,xs:10,children:[Object(m.jsx)(x,{dataset:a,genreToggles:r}),Object(m.jsx)(y,{genreToggles:r})]})]})})})};a.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(w,{})}),document.getElementById("root"))},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));var s=n(10),r=n(22),i=n(0),a=n.p+"static/media/spotify_decades.d5ba62b9.csv",c=function e(t){for(var n in Object(r.a)(this,e),this.name="",this.artist="",this.album_name="",this.album_image_url="",this.album_release_date="",this.duration_ms="",this.explicit="",this.popularity="",this.preview_url="",this.danceability="",this.energy="",this.key="",this.loudness="",this.mode="",this.speechiness="",this.acousticness="",this.instrumentalness="",this.liveness="",this.valence="",this.tempo="",this.time_signature="",this.artist_followers="",this.artist_genres="",this.artist_popularity="",this.track_id="",t){var s;this[n]=null!==(s=t[n])&&void 0!==s?s:""}};function o(){var e=Object(i.useState)(sessionStorage.getItem("dataBytes")),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){var e;(null!==(e=null===n||void 0===n?void 0:n.length)&&void 0!==e?e:0)>0||fetch(a).then((function(e){return e.text()})).then((function(e){e&&(r(e),sessionStorage.setItem("dataBytes",e))}))})),n}},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var s=n(22),r=n(25),i=n(97),a=n(55),c=n(53),o=["danceability","energy","speechiness","acousticness","instrumentalness","liveness","valence"],u=function(){function e(t){var n=this;Object(s.a)(this,e),this.rows=void 0,this.genres=void 0,this.genreCounts=void 0;var r=t.flatMap((function(e){return e.artist_genres.replaceAll(/[[\]'"]/gi,"").split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0}))}));this.rows=t,this.genreCounts=r.reduce((function(e,t){var n;return e.set(t,1+(null!==(n=e.get(t))&&void 0!==n?n:0))}),new Map),this.genres=Object(a.uniq)(r).sort((function(e,t){var s,r,i=null!==(s=n.genreCounts.get(e))&&void 0!==s?s:0,a=null!==(r=n.genreCounts.get(t))&&void 0!==r?r:0;return i===a?e.localeCompare(t):i-a}))}return Object(r.a)(e,[{key:"toGenreVisData",value:function(){return this.rows.flatMap((function(e){var t=e.album_release_date.slice(0,4);return o.map((function(n){return{year:Number(t),feature_name:n,value:e[n]?Number(e[n]):0,genres:e.artist_genres.replaceAll(/[[\]'"]/gi,"").split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0}))}}))}))}}],[{key:"fromBlob",value:function(t){return new e(i.b(t).map((function(e){return new c.a(e)})))}}]),e}()}},[[241,1,2]]]);
//# sourceMappingURL=main.1d00b6b3.chunk.js.map