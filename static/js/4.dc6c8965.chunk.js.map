{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@mui/system/esm/createBox.js","../node_modules/@mui/material/Box/Box.js","TopArtistsForTheDecadeVis.tsx"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_excluded","Box","options","defaultTheme","defaultClassName","generateClassName","BoxRoot","styled","styleFunctionSx","React","inProps","ref","theme","useTheme","_extendSxProp","extendSxProp","className","component","other","_objectWithoutPropertiesLoose","_jsx","_extends","as","clsx","createBox","createTheme","ClassNameGenerator","generate","BarChart","props","visRef","useRef","useEffect","svg","iWidth","width","margin","left","right","iHeight","height","top","bottom","data","rollupData","xAttr","yAttr","x","d3","domain","Array","from","map","n","toString","padding","y","line","d","bandwidth","distinctArtists","current","append","attr","g","selectAll","join","datum","text","style","call","drawBarChart","remove","TopArtistsForTheDecadeVis","dataBytes","useCsvData","dataset","Dataset","fromBlob","rollup","genreToggles","name","get","rawData","r","artist","year","Date","album_release_date","getFullYear","decade","grouping","flatMap","decadeGrouping","artistGrouping","count","reduce","sum","rows","sort","a","b"],"mappings":"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","file":"static/js/4.dc6c8965.chunk.js","sourcesContent":["import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"component\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport styled from '@mui/styled-engine';\nimport styleFunctionSx, { extendSxProp } from './styleFunctionSx';\nimport useTheme from './useTheme';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function createBox(options = {}) {\n  const {\n    defaultTheme,\n    defaultClassName = 'MuiBox-root',\n    generateClassName\n  } = options;\n  const BoxRoot = styled('div')(styleFunctionSx);\n  const Box = /*#__PURE__*/React.forwardRef(function Box(inProps, ref) {\n    const theme = useTheme(defaultTheme);\n\n    const _extendSxProp = extendSxProp(inProps),\n          {\n      className,\n      component = 'div'\n    } = _extendSxProp,\n          other = _objectWithoutPropertiesLoose(_extendSxProp, _excluded);\n\n    return /*#__PURE__*/_jsx(BoxRoot, _extends({\n      as: component,\n      ref: ref,\n      className: clsx(className, generateClassName ? generateClassName(defaultClassName) : defaultClassName),\n      theme: theme\n    }, other));\n  });\n  process.env.NODE_ENV !== \"production\" ? Box.propTypes\n  /* remove-proptypes */\n  = {\n    // ----------------------------- Warning --------------------------------\n    // | These PropTypes are generated from the TypeScript type definitions |\n    // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n    // ----------------------------------------------------------------------\n\n    /**\n     * @ignore\n     */\n    children: PropTypes.node,\n\n    /**\n     * The component used for the root node.\n     * Either a string to use a HTML element or a component.\n     */\n    component: PropTypes.elementType,\n\n    /**\n     * @ignore\n     */\n    sx: PropTypes.oneOfType([PropTypes.object, PropTypes.array])\n  } : void 0;\n  return Box;\n}","import { createBox } from '@mui/system';\nimport { unstable_ClassNameGenerator as ClassNameGenerator } from '../utils';\nimport { createTheme } from '../styles';\nconst defaultTheme = createTheme();\n/**\n * @ignore - do not document.\n */\n\nconst Box = createBox({\n  defaultTheme,\n  defaultClassName: 'MuiBox-root',\n  generateClassName: ClassNameGenerator.generate\n});\nexport default Box;","import { Box, Grid } from \"@mui/material\";\nimport * as d3 from \"d3\";\nimport React, { RefObject, useEffect, useRef } from \"react\";\nimport { CsvRow, useCsvData } from \"./CsvRow\";\nimport { Dataset } from \"./Dataset\";\n\nfunction TopArtistsForTheDecadeVis(props: {\n  genreToggles: Map<string, boolean>;\n}) {\n  const dataBytes = useCsvData();\n  if (!dataBytes) return <p>Loading...</p>;\n  const dataset = Dataset.fromBlob(dataBytes);\n\n  const selectedGenres = Array.from(props.genreToggles.keys()).filter((name) =>\n    props.genreToggles.get(name)\n  );\n\n  const rollup = rollupData(dataset.rows)\n    .filter((r) => r.distinctArtists > 1)\n    .filter((r) => r.decade !== 2020);\n  rollup.sort((a, b) => a.decade - b.decade);\n\n  //const filtered = rollup.filter((r) => sea);\n\n  return (\n    <Box>\n      <h2>Top Artists for the Decade</h2>\n      <BarChart\n        rollupData={rollup}\n        height={300}\n        width={800}\n        margin={{ left: 50, top: 50, right: 20, bottom: 20 }}\n      />\n    </Box>\n  );\n}\n\nfunction BarChart(props: {\n  rollupData: UniqueArtistsRollup[];\n  height: number;\n  width: number;\n  margin: { left: number; right: number; top: number; bottom: number };\n}) {\n  const visRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    const svg = drawBarChart({ ref: visRef, ...props });\n    return () => {\n      svg.remove();\n    };\n  });\n  return <div ref={visRef} />;\n}\n\nfunction drawBarChart(props: {\n  rollupData: UniqueArtistsRollup[];\n  ref: RefObject<HTMLDivElement>;\n  height: number;\n  width: number;\n  margin: { left: number; right: number; top: number; bottom: number };\n}) {\n  const iWidth = props.width - props.margin.left - props.margin.right;\n  const iHeight = props.height - props.margin.top - props.margin.bottom;\n\n  const data = props.rollupData;\n\n  const xAttr = \"decade\";\n  const yAttr = \"distinctArtists\";\n\n  const x = d3\n    .scaleBand([0, iWidth])\n    .domain(\n      Array.from(new Array(7).keys())\n        .map((n) => 1950 + n * 10)\n        .map((x) => x.toString())\n    )\n    .padding(0.05);\n\n  const y = d3.scaleLinear([iHeight, 0]).domain([0, 210]);\n\n  const line = d3\n    .line<UniqueArtistsRollup>()\n    .x((d) => (x(d[xAttr].toString()) ?? 0) + x.bandwidth() / 2)\n    .y((d) => y(d.distinctArtists));\n\n  const div = d3.select(props.ref.current);\n  const svg = div\n    .append(\"svg\")\n    .attr(\"viewBox\", `0 0 ${props.width} ${props.height}`);\n\n  const g = svg\n    .append(\"g\")\n    .attr(\"transform\", `translate(${props.margin.left}, ${props.margin.top})`);\n\n  g.selectAll(\"rect\")\n    .data(data)\n    .join(\"rect\")\n    .attr(\"x\", (d) => x(d[xAttr].toString()) ?? 0)\n    .attr(\"width\", () => x.bandwidth())\n    .attr(\"y\", (d) => y(d[yAttr]))\n    .attr(\"height\", (d) => iHeight - y(d[yAttr]))\n    .attr(\"fill\", \"#adc2eb\");\n\n  g.selectAll(\".point\")\n    .data(data)\n    .join(\"circle\")\n    .attr(\"class\", \"point\")\n    .attr(\"cx\", (d) => (x(d[xAttr].toString()) ?? 0) + x.bandwidth() / 2)\n    .attr(\"cy\", (d) => y(d[yAttr]))\n    .attr(\"r\", 2)\n    .attr(\"fill\", \"black\");\n\n  g.append(\"path\")\n    .datum(data)\n    .attr(\"d\", (d) => line(d))\n    .attr(\"fill\", \"none\")\n    .attr(\"class\", \"line\")\n    .attr(\"stroke\", \"steelblue\")\n    .attr(\"stroke-width\", 1.5);\n\n  g.selectAll(\".countText\")\n    .data(data)\n    .join(\"text\")\n    .text((d) => d.distinctArtists)\n    .attr(\"class\", \"countText\")\n    .attr(\"text-anchor\", \"middle\")\n    .attr(\"x\", (d) => (x(d[xAttr].toString()) ?? 0) + x.bandwidth() / 2)\n    .attr(\"y\", (d) => y(d[yAttr]) - 15);\n\n  g.append(\"g\")\n    .attr(\"transform\", `translate(0, ${iHeight})`)\n    .style(\"font-size\", \"small\")\n    .call(d3.axisBottom(x));\n\n  return svg;\n}\n\ninterface UniqueArtistsRollup {\n  decade: number;\n  artist: string;\n  count: number;\n  distinctArtists: number;\n}\n\nfunction rollupData(rawData: CsvRow[]): UniqueArtistsRollup[] {\n  const data = rawData\n    .map((r) => ({\n      artist: r.artist,\n      year: new Date(r.album_release_date).getFullYear(),\n    }))\n    .map((r) => ({\n      artist: r.artist,\n      decade: r.year - (r.year % 10),\n    }));\n\n  const grouping = d3.group(\n    data,\n    (r) => r.decade,\n    (r) => r.artist\n  );\n\n  return Array.from(grouping).flatMap(([decade, decadeGrouping]) => {\n    const rollup = Array.from(decadeGrouping).map(\n      ([artist, artistGrouping]) => ({\n        decade: decade,\n        artist: artist,\n        count: artistGrouping.length,\n        distinctArtists: 1,\n      })\n    );\n    rollup.push({\n      decade: decade,\n      artist: \"\",\n      count: rollup.reduce((sum, g) => sum + g.count, 0),\n      distinctArtists: rollup.length,\n    });\n    return rollup;\n  });\n}\n\nexport default TopArtistsForTheDecadeVis;\n"],"sourceRoot":""}